<main>
  <div class="container">
    <div class="col-xs-12">
      <h2 class="product_index">商品一覧</h2>
    </div>
  </div>
  <br>

  <div class="container">
    <div class="row">

	    <% @search_products.each do |product| %>
	      <div class="col-xs-6 col-lg-4 text-center mb-4">
          <div class="card p-4" style="width: 20rem;">
            <% if product.stocks != 0 %>
              <%= link_to product_path(product.id) do %>
                <%= attachment_image_tag product, :image, :fill, 200, 200, format: 'jpeg', fallback: "no_image.jpg", :size =>'250x250' %>
              <% end %>
            <% else %>
              <%= link_to product_path(product.id) do %>
                <%= attachment_image_tag product, :image, :fill, 200, 200, format: 'jpeg', fallback: "sold_out.jpg", :size =>'250x250' %>
              <% end %>
            <% end %>

            <div class="card-body">
              <h2 class="card-title"><%= product.product_name.truncate(9) %></h2>
              <h4 class="card-text"><%= product.artist.truncate(11) %></h4> 
              <h4 class="card-text">¥<%= (product.price*1.08).floor %>円 (税込)</h4>
            </div>
          </div>
        </div>
      <% end %>
      </div>
  </div>
  <%= paginate @products, class: "paginate" %>
</main>